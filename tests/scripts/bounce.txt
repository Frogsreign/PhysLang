// Bounce (1)
//
// Models the collision with as a spring
//
// @author Jacob Leider
//

// Ball of mass 1.0 kg at a height of 1.0 m
point(name=ball, pos=[0, 0, 1], vel=[0, 0, 0], acc=[0, 0, 0], mass=1.0);

// Gravity
force(name=gravity, input=[A], output=A.net_force[2], func="-9.81 * A.mass");
// Air resistance
force(name=air_res, input=[A], output=A.net_force[2], func="-0.5 * A.vel[2]^3");
// Collision force
force(name=spring, input=[A], output=A.net_force[2], func="1000 * step(-1 * A.pos[2]) ");

// Standard newtonian step
update(input=[A], output=A.pos[2], func="A.pos[2] + dt * A.vel[2]");
update(input=[A], output=A.vel[2], func="A.vel[2] + dt * A.acc[2]");
update(input=[A], output=A.acc[2], func="A.net_force[2] / A.mass");
